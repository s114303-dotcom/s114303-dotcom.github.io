<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>ä»Šå¤©åƒä»€éº¼</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;font-family:system-ui;background:#111;color:#fff;text-align:center}
button{padding:10px 18px;margin:6px;font-size:16px;border:none;border-radius:8px;cursor:pointer}
.primary{background:#4ade80;color:#000}
.secondary{background:#60a5fa;color:#000}
.danger{background:#f87171;color:#000}
#result{margin-top:18px;font-size:26px}
#foodImage{font-size:120px;margin-top:10px}
#overlay{position:fixed;inset:0;background:rgba(0,0,0,.85);display:none;align-items:center;justify-content:center;z-index:999}
#gameBox{position:relative}
#flower{position:absolute;top:-50px;left:0;font-size:36px}
#flowerText{position:absolute;top:-28px;left:48px;font-size:14px;text-align:left;width:260px}
#timerDisplay{position:absolute;top:10px;right:10px;font-size:20px}
canvas{background:#000;border:2px solid #fff}
</style>
</head>
<body>

<h1>ğŸ½ ä»Šå¤©åƒä»€éº¼</h1>

<button id="modeBtn" class="secondary">æ¨¡å¼ï¼šæ­£å¸¸</button><br>
<button id="pickBtn" class="primary">å¹«æˆ‘æ±ºå®š</button>
<button id="funBtn" class="danger">More Fun</button>

<div id="result"></div>
<div id="foodImage">ğŸ´</div>

<!-- More Fun overlay -->
<div id="overlay">
  <div id="gameBox">
    <div id="flower">ğŸŒ¼</div>
    <div id="flowerText"></div>
    <div id="timerDisplay">æ’äº† 0 ç§’</div>
    <canvas id="game" width="360" height="480"></canvas>
  </div>
</div>

<script>
/* ================== é¤é» ================== */
const normalFoods=[
'æ»·è‚‰é£¯','é›è‚‰é£¯','æ’éª¨ä¾¿ç•¶','ç‚¸é›è…¿ä¾¿ç•¶','æ§è‚‰é£¯',
'ç‰›è‚‰éºµ','éº»é†¬éºµ','ä¹¾æ‹Œéºµ','æ‹‰éºµ','ç‚’éºµ',
'æ°´é¤ƒ','é‹è²¼','é¹¹é…¥é›','é›æ’','èšµä»”ç…',
'å’–å“©é£¯','ç¾©å¤§åˆ©éºµ','æŠ«è–©','æ¼¢å ¡','ä¸¼é£¯',
'æ²™æ‹‰','æ¶¼éºµ','ç²¥','åœ°ç“œ','æ¹¯éºµ',
'æ³¡éºµ','ä¾¿åˆ©å•†åº—','å¤–é€','éš¨ä¾¿åƒ'
];

const cheapFoods=[
'æ»·è‚‰é£¯','é›è‚‰é£¯','ç™½é£¯ï¼‹æ»·æ±','é†¬æ²¹æ‹Œé£¯','åœ°ç“œ','åå¸','é¥…é ­',
'æ³¡éºµ','ä¹¾æ‹Œéºµ','é™½æ˜¥éºµ','å†¬ç²‰','ç±³ç²‰æ¹¯','ç²¥','éºµç·š',
'æ»·è›‹','ç…è›‹','èŒ¶è‘‰è›‹','è±†å¹²','æ¿è±†è…','çš®è›‹è±†è…',
'èŒ¶è‘‰è›‹ï¼‹é£¯ç³°','åœ°ç“œï¼‹è±†æ¼¿','é—œæ±ç…®','å¾®æ³¢ç‚’é£¯','æ‰“æŠ˜ä¾¿ç•¶',
'å†·å‡æ°´é¤ƒ','å†·å‡ç‚’é£¯','æ˜¨å¤©å‰©èœ',
'å¤šå–æ°´','å…ˆç¡è¦º','ä¸åƒäº†ï¼ˆé¨™è‡ªå·±ï¼‰','èŒ¶è‘‰è›‹','é¥…é ­','æ°´'
];

const rewardFoods=['ç‰›æ’','é¾è¦','æµ·è†½'];
const punishFoods=['åƒå±','åƒåœŸ','åƒè‡ªå·±'];

const emojiMap={
  é£¯:'ğŸš',éºµ:'ğŸœ',é›:'ğŸ—',ç‰›:'ğŸ¥©',æŠ«è–©:'ğŸ•',æ¼¢å ¡:'ğŸ”',
  æ°´é¤ƒ:'ğŸ¥Ÿ',åœ°ç“œ:'ğŸ ',åå¸:'ğŸ',ä¾¿ç•¶:'ğŸ±',
  èŒ¶è‘‰è›‹:'ğŸ¥š',é¥…é ­:'ğŸ¥Ÿ',æ°´:'ğŸ’§',æ²™æ‹‰'ğŸ¥—',
æ»·è›‹:'ğŸ¥š',è±†å¹²:'ğŸŸ«'
};

/* ================== ä¸»åŠŸèƒ½ ================== */
let mode='normal';
const resultEl=result;
const imgEl=foodImage;

modeBtn.onclick=()=>{
  mode=mode==='normal'?'cheap':'normal';
  modeBtn.textContent='æ¨¡å¼ï¼š'+(mode==='normal'?'æ­£å¸¸':'çœéŒ¢');
};

pickBtn.onclick=()=>pickFood();

function pickFood(food){
  if(!food){
    const list=mode==='normal'?normalFoods:cheapFoods;
    food=list[Math.floor(Math.random()*list.length)];
  }

  // åˆ¤æ–· emoji
  let e='ğŸ´';

  if(punishFoods.includes(food)){
    if(food==='åƒå±') e='ğŸ’©';
    else if(food==='åƒè‡ªå·±') e='ğŸ‘±â€â™‚ï¸';
    else if(food==='åƒåœŸ') e='ğŸŸ«';
  } else {
    for(const k in emojiMap) if(food.includes(k)) e=emojiMap[k];
  }

  resultEl.textContent = `${e} ${food}`;
  imgEl.textContent = e;
}

/* ================== More Fun ================== */
const overlay=document.getElementById('overlay');
const canvas=document.getElementById('game');
const ctx=canvas.getContext('2d');
const flowerText=document.getElementById('flowerText');
const timerDisplay=document.getElementById('timerDisplay');

let moreFunTimer = 0;
let timerInterval = null;
let playing = false;

/* éŠæˆ²ç‰©ä»¶ */
const BASE_SPEED = 3;
let speedBoost = 0;
let paddle={x:140,y:450,w:80,h:10};
let ball={x:180,y:260,r:8,vx:BASE_SPEED,vy:BASE_SPEED};

funBtn.onclick = () => {
  overlay.style.display = 'flex';
  flowerText.textContent = 'æ’ä½ 30 ç§’å°±è´ï¼';
  resetGame();
  playing = true;
  startTimer();
  requestAnimationFrame(loop);
};

overlay.onmousemove = e => {
  const r=canvas.getBoundingClientRect();
  paddle.x=e.clientX-r.left-paddle.w/2;
};

/* é‡ç½®éŠæˆ² */
function resetGame(){
  speedBoost = 0;
  ball.x = 180;
  ball.y = 260;
  ball.vx = BASE_SPEED;
  ball.vy = BASE_SPEED;
}

/* è¨ˆæ™‚å™¨ */
function startTimer() {
  moreFunTimer = 0;
  timerDisplay.textContent = 'æ’äº† 0 ç§’';
  timerInterval = setInterval(() => {
    moreFunTimer++;
    timerDisplay.textContent = `æ’äº† ${moreFunTimer} ç§’`;
    if (moreFunTimer >= 30) {
      clearInterval(timerInterval);
      winGame();
    }
  }, 1000);
}

function stopTimer() {
  clearInterval(timerInterval);
  timerInterval = null;
  moreFunTimer = 0;
  timerDisplay.textContent = 'æ’äº† 0 ç§’';
}

/* éŠæˆ²ä¸»è¿´åœˆ - ä¿®æ­£ç‰ˆç¢°æ’ */
function loop(){
  if(!playing) return;
  ctx.clearRect(0,0,360,480);

  // çƒé‹å‹•
  ball.x += ball.vx;
  ball.y += ball.vy;

  if(ball.x<ball.r || ball.x>360-ball.r) ball.vx*=-1;
  if(ball.y<ball.r) ball.vy*=-1;

  // ç¢°æ¿å­ä¿®æ­£ç©¿é€
  if(ball.vy > 0){
    if(ball.y + ball.r >= paddle.y && ball.y - ball.r <= paddle.y + paddle.h &&
       ball.x + ball.r >= paddle.x && ball.x - ball.r <= paddle.x + paddle.w){
      ball.vy*=-1;
      speedBoost += 0.3;
      ball.vx = Math.sign(ball.vx)*(BASE_SPEED+speedBoost);
      ball.vy = Math.sign(ball.vy)*(BASE_SPEED+speedBoost);
      ball.y = paddle.y - ball.r;
    }
  }

  if(ball.y>480){
    gameOver();
    return;
  }

  // ç¹ªåœ–
  ctx.fillStyle='#fff';
  ctx.beginPath();
  ctx.arc(ball.x,ball.y,ball.r,0,Math.PI*2);
  ctx.fill();
  ctx.fillRect(paddle.x,paddle.y,paddle.w,paddle.h);

  requestAnimationFrame(loop);
}

/* éŠæˆ²çµæŸ */
function gameOver(){
  playing=false;
  stopTimer();
  const f=punishFoods[Math.floor(Math.random()*punishFoods.length)];
  flowerText.textContent='å“ˆå“ˆå“ˆå“ˆå“ˆï¼Œæˆ‘æ²’æœ‰æ‰‹ç©å¾—éƒ½ä½ å¥½';
  pickFood(f);
  setTimeout(()=>overlay.style.display='none',1500);
}

function winGame(){
  playing=false;
  stopTimer();
  const f=rewardFoods[Math.floor(Math.random()*rewardFoods.length)];
  flowerText.textContent='ä½ å‹åˆ©äº†ï¼';
  pickFood(f);
  setTimeout(()=>overlay.style.display='none',1500);
}
</script>
</body>
</html>
